# Visual Style Reference Implementation Plan - FIX

## Issue

The UI is still showing white backgrounds because components use invalid Tailwind syntax `bg-[--background]` instead of the correct `bg-background` semantic class.

## Root Cause

Tailwind CSS does not recognize `bg-[--variable]` syntax. It requires either:

1. Semantic classes: `bg-background` (defined in tailwind.config.js)
2. Arbitrary values with HSL: `bg-[hsl(var(--background))]`

## Fix Required

Replace all instances of `bg-[--variable]` and similar patterns with proper Tailwind classes.

---

## Files to Fix (25 instances total)

### 1. `src/components/editor/EditorView.tsx` (6 instances)

| Line | Current                                                                | Fix                                                        |
| ---- | ---------------------------------------------------------------------- | ---------------------------------------------------------- |
| 673  | `bg-[--background]`                                                    | `bg-background`                                            |
| 694  | `text-[--foreground]/70 hover:text-[--foreground] hover:bg-[--accent]` | `text-foreground/70 hover:text-foreground hover:bg-accent` |
| 817  | `bg-[--muted] border-t border-[--border]`                              | `bg-muted border-t border-border`                          |
| 829  | `hover:bg-[--accent] text-[--foreground]/70 hover:text-[--foreground]` | `hover:bg-accent text-foreground/70 hover:text-foreground` |
| 839  | `bg-[--foreground] text-[--background]`                                | `bg-foreground text-background`                            |
| 852  | `hover:bg-[--accent] text-[--foreground]/70 hover:text-[--foreground]` | `hover:bg-accent text-foreground/70 hover:text-foreground` |

### 2. `src/components/editor/timeline/Timeline.tsx` (10 instances)

| Line | Current                                                                | Fix                                                        |
| ---- | ---------------------------------------------------------------------- | ---------------------------------------------------------- |
| 162  | `bg-[--muted] border-t border-[--border]`                              | `bg-muted border-t border-border`                          |
| 164  | `border-b border-[--border] bg-[--background]`                         | `border-b border-border bg-background`                     |
| 172  | `text-[--foreground]/70 hover:bg-[--accent] hover:text-[--foreground]` | `text-foreground/70 hover:bg-accent hover:text-foreground` |
| 184  | `text-[--foreground]/70 hover:bg-[--accent] hover:text-[--foreground]` | `text-foreground/70 hover:bg-accent hover:text-foreground` |
| 196  | `text-[--foreground]/70 hover:bg-[--accent] hover:text-[--foreground]` | `text-foreground/70 hover:bg-accent hover:text-foreground` |
| 210  | `text-[--foreground]/70 hover:bg-[--accent] hover:text-[--foreground]` | `text-foreground/70 hover:bg-accent hover:text-foreground` |
| 221  | `text-[--foreground]/70 hover:bg-[--accent] hover:text-[--foreground]` | `text-foreground/70 hover:bg-accent hover:text-foreground` |
| 249  | `bg-[--muted]`                                                         | `bg-muted`                                                 |

### 3. `src/components/editor/timeline/SliceItem.tsx` (3 instances)

| Line | Current                                           | Fix                                       |
| ---- | ------------------------------------------------- | ----------------------------------------- |
| 164  | `bg-[--foreground]/10 hover:bg-[--foreground]/30` | `bg-foreground/10 hover:bg-foreground/30` |
| 207  | `bg-[--foreground]/10 hover:bg-[--foreground]/30` | `bg-foreground/10 hover:bg-foreground/30` |
| 222  | `bg-[--background]/80 text-[--foreground]/80`     | `bg-background/80 text-foreground/80`     |

### 4. `src/components/editor/timeline/LayoutTrack.tsx` (4 instances)

| Line | Current                                           | Fix                                       |
| ---- | ------------------------------------------------- | ----------------------------------------- |
| 126  | `bg-[--foreground]/10 hover:bg-[--foreground]/30` | `bg-foreground/10 hover:bg-foreground/30` |
| 146  | `bg-[--foreground]/10 hover:bg-[--foreground]/30` | `bg-foreground/10 hover:bg-foreground/30` |
| 178  | `bg-[--muted] border-r border-[--border]`         | `bg-muted border-r border-border`         |
| 186  | `bg-[--background]`                               | `bg-background`                           |

### 5. `src/components/editor/timeline/TimelineTrack.tsx` (2 instances)

| Line | Current                                   | Fix                               |
| ---- | ----------------------------------------- | --------------------------------- |
| 19   | `bg-[--muted] border-r border-[--border]` | `bg-muted border-r border-border` |
| 26   | `bg-[--background]`                       | `bg-background`                   |

### 6. `src/components/editor/timeline/TimeRuler.tsx` (2 instances)

| Line | Current                                      | Fix                                  |
| ---- | -------------------------------------------- | ------------------------------------ |
| 67   | `bg-[--muted] border-b border-[--border]`    | `bg-muted border-b border-border`    |
| 83   | `bg-[--foreground]` / `bg-[--foreground]/40` | `bg-foreground` / `bg-foreground/40` |

---

## Implementation Strategy

Use **find and replace** with regex to fix all instances at once:

```
Find: \[--background\]
Replace: background

Find: \[--foreground\]
Replace: foreground

Find: \[--muted\]
Replace: muted

Find: \[--accent\]
Replace: accent

Find: \[--border\]
Replace: border
```

---

## Verification

1. Run `bun run build` - should compile without errors
2. Run `bun run tauri:dev` - UI should show dark background (#1a1a1e)

---

## Previous Plan (Completed)

The CSS variables and Tailwind config updates below have already been applied:

---

## Color Palette (Hex â†’ HSL Conversions)

| Color Name       | Hex       | HSL Value     | Usage                |
| ---------------- | --------- | ------------- | -------------------- |
| Deep Background  | `#1a1a1e` | `240 8% 11%`  | App background       |
| Panel Background | `#252528` | `240 4% 15%`  | Sidebar panels       |
| Card Surface     | `#2d2d32` | `240 5% 19%`  | Elevated cards       |
| Border Subtle    | `#3a3a40` | `240 5% 24%`  | Dividers             |
| Text Primary     | `#ffffff` | `0 0% 100%`   | Headlines            |
| Text Secondary   | `#9ca3af` | `218 11% 65%` | Descriptions         |
| Text Muted       | `#6b7280` | `220 9% 46%`  | Timestamps           |
| Accent Purple    | `#8b5cf6` | `258 90% 66%` | Interactive controls |
| Accent Orange    | `#f97316` | `25 95% 53%`  | Waveforms            |
| Accent Yellow    | `#fbbf24` | `43 96% 56%`  | Markers              |
| Success Green    | `#22c55e` | `142 71% 45%` | Success states       |
| Destructive Red  | `#ef4444` | `0 84% 60%`   | Warnings             |

---

## Files to Modify

### 1. `index.html` (1 change)

Add `class="dark"` to enable dark mode by default:

```html
<html lang="en" class="dark" style="background: transparent"></html>
```

### 2. `src/index.css` (~80 lines)

**A. Update `.dark` CSS variables (lines 26-43):**

```css
.dark {
  /* Core backgrounds */
  --background: 240 8% 11%;
  --foreground: 0 0% 100%;

  /* Panel/Card hierarchy - NEW */
  --panel: 240 4% 15%;
  --card: 240 5% 19%;

  /* Muted/Secondary */
  --muted: 240 4% 15%;
  --muted-foreground: 218 11% 65%;

  /* Border */
  --border: 240 5% 24%;

  /* Accent (now purple) */
  --accent: 258 90% 66%;
  --accent-foreground: 0 0% 100%;

  /* NEW accent variations */
  --accent-orange: 25 95% 53%;
  --accent-yellow: 43 96% 56%;

  /* Success - NEW */
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;

  /* Destructive */
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  /* Ring/Focus */
  --ring: 258 90% 66%;

  /* Timeline */
  --timeline-playhead: 0 84% 60%;
  --timeline-selection: 258 90% 66%;
  --timeline-slice: 240 5% 24%;
  --timeline-slice-selected: 258 90% 66%;
  --timeline-waveform: 25 95% 53%;
}
```

**B. Update toolbar component styles (lines 116-530):**
Replace hardcoded RGBA/RGB values with CSS variable equivalents:

| Current                     | New                             |
| --------------------------- | ------------------------------- |
| `rgba(30, 30, 30, 0.95)`    | `hsl(var(--panel) / 0.95)`      |
| `rgba(26, 26, 26, 0.98)`    | `hsl(var(--background) / 0.98)` |
| `rgba(255, 255, 255, 0.7)`  | `hsl(var(--muted-foreground))`  |
| `rgba(255, 255, 255, 0.5)`  | `hsl(var(--foreground) / 0.5)`  |
| `rgba(255, 255, 255, 0.3)`  | `hsl(var(--foreground) / 0.3)`  |
| `rgba(255, 255, 255, 0.15)` | `hsl(var(--foreground) / 0.15)` |
| `rgba(255, 255, 255, 0.1)`  | `hsl(var(--foreground) / 0.1)`  |

**Note: Keep toolbar styles as-is** - The frosted glass effect with hardcoded RGBA values works independently from the main theme and should not be modified.

### 3. `tailwind.config.js` (~15 lines)

Add new color mappings:

```js
export default {
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        panel: "hsl(var(--panel))",
        card: "hsl(var(--card))",
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
          orange: "hsl(var(--accent-orange))",
          yellow: "hsl(var(--accent-yellow))",
        },
        success: {
          DEFAULT: "hsl(var(--success))",
          foreground: "hsl(var(--success-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        border: "hsl(var(--border))",
        ring: "hsl(var(--ring))",
        timeline: {
          playhead: "hsl(var(--timeline-playhead))",
          selection: "hsl(var(--timeline-selection))",
          slice: "hsl(var(--timeline-slice))",
          waveform: "hsl(var(--timeline-waveform))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
    },
  },
  plugins: [],
};
```

### 4. `src/components/export/ExportDialog.tsx` (~20 replacements)

Replace hardcoded hex colors:

| Line               | Current                                   | New                                    |
| ------------------ | ----------------------------------------- | -------------------------------------- |
| 351                | `bg-[#1a1a1a] border-[#333]`              | `bg-background border-border`          |
| 353, 507, 570      | `border-[#333]`                           | `border-border`                        |
| 392-394            | `border-red-500 bg-red-500/10` (selected) | `border-accent bg-accent/10`           |
| 393                | `border-[#333] hover:border-[#555]`       | `border-border hover:border-border/80` |
| 423                | `bg-[#222]`                               | `bg-panel`                             |
| 437, 457, 476, 495 | `bg-[#1a1a1a] border-[#333]`              | `bg-background border-border`          |
| 535                | `bg-[#333]`                               | `bg-border`                            |
| 537, 583, 615, 634 | `bg-red-500 hover:bg-red-600`             | `bg-accent hover:bg-accent/90`         |
| 595, 607           | `border-[#333] hover:border-[#555]`       | `border-border hover:border-border/80` |

### 5. Timeline Components (Optional - Low Priority)

**`src/components/editor/timeline/Timeline.tsx`:**

- Line ~293: Update screen waveform color to `hsl(25 95% 53% / 0.7)` (accent orange)
- Line ~316: Update audio waveform color to `hsl(142 71% 45% / 0.5)` (success green)

**`src/components/editor/timeline/Waveform.tsx`:**

- Update default color prop to use accent orange

---

## Implementation Order

1. **`index.html`** - Add `dark` class (prevents FOUC)
2. **`src/index.css`** - Update CSS variables (skip toolbar component styles)
3. **`tailwind.config.js`** - Add new Tailwind colors
4. **`src/components/export/ExportDialog.tsx`** - Replace hardcoded colors, use purple accent for buttons
5. **Timeline components** - Update waveform colors (optional)

## Design Decisions

- **Primary accent**: Purple (`#8b5cf6`) for all interactive elements including Export/Done buttons
- **Destructive red**: Keep only for Record/Stop buttons and actual destructive actions
- **Toolbar**: Keep existing frosted glass styles unchanged

---

## Verification Steps

1. Run `bun run dev` to start development server
2. Run `bun run tauri:dev` to test full application
3. Verify visually:
   - Editor window has dark background (`#1a1a1e`)
   - Export dialog uses semantic colors
   - Toolbar maintains glass-morphism effect
   - Interactive elements use purple accent
   - Timeline waveforms use orange accent
4. Run `bun run lint` to ensure no errors
5. Run `bun run build` to verify TypeScript compilation

---

## Backward Compatibility

- All existing Tailwind classes continue to work
- New classes available: `bg-panel`, `bg-card`, `bg-success`, `text-accent-orange`
- No breaking changes to component APIs
